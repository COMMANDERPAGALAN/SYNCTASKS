# Architecture & Flow Diagrams

## System Architecture

```
???????????????????????????????????????????????????????????????
?   Smart Study Planner     ?
?          Architecture Diagram                 ?
???????????????????????????????????????????????????????????????

      UI Layer
  ????????????????????????????????????????
   ?     ?
    ?????????    ????????????????    ??????????????
    ?Form1  ??????HostRoleForm  ??????MainLogin   ?
    ?(Start)?    ?(Role Select) ?    ?(Login/Reg) ?
    ?????????    ????????????????    ??????????????
                 ?  ?
         ?????????????????????
                ?    ?    ?
   ??????????????  ????????????????
          ?RegisterForm1?  ?   Form2      ?
    ? (Register)  ?  ? (Main App)   ?
    ??????????????  ????????????????
?
     Business Logic Layer
        ????????????????????????????????????????
      ?     ?
    ???????????????    ????????????????  ?????????????
 ? DataStore   ??????   Session    ?  ?   User    ?
    ?(File/DB)   ?    ?(Current User)?  ? (Entity)  ?
    ???????????????    ????????????????  ?????????????
           ?
      Data Layer
???????????????????????????????????????
?  XML Storage (AppData)          ?
?  ?? students.xml  ?
?  ?? instructors.xml          ?
???????????????????????????????????????
```

---

## Complete Application Flow

```
    ????????????????
  ? Start App  ?
            ????????????????
           ?
????????????????
          ?   Form1      ?
  ?  (Welcome)   ?
      ????????????????
       ?        ?
          ??????????????     ?????????????
      ?            ?
    ????????????????   ????????????????
    ? Register  ?        ?  Login       ?
    ?  Button ?    ?  Button      ?
    ????????????????             ????????????????
       ?       ?
    ????????????????????????  ????????????????????????
    ?HostRoleForm?  ?HostRoleForm          ?
    ? (Choose Role)       ?  ? (Choose Role)        ?
  ?? Student ????????????  ?Student ???????????   ?
? Instructor          ?  ?Instructor        ?   ?
    ?? ? ? ? ? ? ? ? ? ? ?  ?? ? ? ? ? ? ? ? ? ?   ?
  ?              ?
    ??????????????????????        ???????????????????
    ? RegisterForm1?        ?  MainLogin   ?
    ? (Registration)     ?        ?  (Login)      ?
    ?? First Name ?????????????????? Username ???????
    ? Last Name     ?        ? Password        ?
    ? Gender          ?        ?       ?
    ? Department    ?   ? [LOGIN] [REG]   ?
    ? Username           ?        ???????????????????
    ? Password      ?   ?     ?
    ? [SIGN UP] [CANCEL] ?     ????????     ?
  ??????????????????????     ?            ?
       ? ?            ?   ?????????????????
       ?   ?????????????????   ?   ? RegisterForm1 ?
       ?   ? Back to Login ?   ?   ?(Second time)  ?
       ?   ?????????????????   ?   ?????????????????
  ?        ?       ?  ?
       ?????????????????????????       ?  ?
    ? Validation?                ?  ?
       ? errors?      ? ?  ?
       ???[Warning]   ?   ?  ?
       ?      ?     ?  ?
       ? ???????????????????????       ?  ?
   ? ? No errors        ?       ?  ?
       ? ? ? Register user   ?????????  ?
       ? ? Save to XML        ?          ?
? ? Set Session.User   ????????????
     ? ??????????????????????
       ?   ?
       ?   ???????????????
       ?   ? Success?    ?
       ?   ???????????????
       ?    ?       ?
     ?    NO?  ?YES
       ?   ??????   ????????????????????
       ?   ?Err ?   ? Show Success Msg ?
?   ?Msg ?   ? Open Form2       ?
    ?   ??????   ????????????????????
       ?
       ????????????????
        ?
   ?????????????????
  ?  Form2        ?
    ? (Main App)    ?
          ? - Dashboard   ?
             ? - Menu Items  ?
         ? - Logout      ?
    ?????????????????
```

---

## Data Flow: Registration

```
User enters data in RegisterForm1
         ?
   ?
???????????????????????????????????
? Button2_Click (SIGN UP)         ?
???????????????????????????????????
? 1. Validate all fields filled   ?
? 2. Get values from TextBoxes    ?
? 3. Create new User object       ?
?    {ID: GUID, Role: String, ... }
???????????????????????????????????
        ?
             ?
    ??????????????????????????
    ? DataStore.             ?
  ? RegisterNewUser()      ?
    ??????????????????????????
    ? 1. Load existing users ?
    ? 2. Check for duplicate ?
    ?    username            ?
 ? 3. If duplicate ?      ?
    ?  Show Error          ?
    ?    Return False        ?
    ? 4. Add new user        ?
    ? 5. Call SaveUsers()    ?
    ??????????????????????????
            ?
    ??????????????????????????????
    ? DataStore.SaveUsers()     ?
    ?????????????????????????????
    ? 1. Create directory if    ?
    ?    not exists    ?
    ? 2. Serialize List(User)   ?
    ?    to XML          ?
    ? 3. Write to file:  ?
    ?    AppData/.../.../       ?
    ?    students.xml OR        ?
    ?    instructors.xml        ?
    ? 4. Return True    ?
    ?????????????????????????????
         ?
         ??????????????????
         ? Success?   ?
       ??????????????????
     YES       NO
            ? ?
  ???????????????
     ?User  ?  ?Error?
        ?saved ?  ?Msg  ?
     ????????  ???????
     ?
      ??????????????????
      ?Set Session.    ?
      ?CurrentUser     ?
      ??????????????????
   ?
      ????????????????????
      ?Show Success Msg  ?
      ?with file info    ?
      ????????????????????
  ?
      ????????????????????
      ?Open Form2        ?
      ?(Main App)      ?
      ????????????????????
```

---

## Data Flow: Login

```
User enters credentials in MainLogin
         ?
 ?
???????????????????????????????????
? Login_Click            ?
???????????????????????????????????
? 1. Get username & password      ?
? 2. Validate not empty           ?
? 3. Call DataStore.      ?
?    ValidateLogin()     ?
???????????????????????????????????
         ?
  ?
    ??????????????????????????
    ? DataStore.      ?
    ? ValidateLogin()        ?
    ??????????????????????????
    ? 1. Load users for role ?
    ? 2. Loop through users  ?
    ? 3. Find matching:      ?
    ?    username (case-   ?
    ?    insensitive) AND    ?
    ?    password (exact)    ?
    ? 4. Return user or Null?
    ??????????????????????????
                 ?
    ????????????????????????????
    ? User found?     ?
    ????????????????????????????
      YES      NO
       ?      ?
   ????????????    ????????????
   ?Valid user?    ?Null/Not  ?
   ?       ?    ?found     ?
   ????????????    ????????????
       ?    ?
    ?        ????????????????
       ?          ?Show Error:   ?
       ?          ?- Invalid   ?
       ?   ?  creds       ?
       ?          ?- Debug info  ?
       ?       ?  (file path, ?
     ?   ?   user count)?
       ?          ????????????????
  ?
   ???????????????????
   ?Set Session.     ?
   ?CurrentUser      ?
   ???????????????????
       ?
   ????????????????????
   ?Create Form2      ?
   ?with user object  ?
   ?Show Form         ?
   ?Hide Login form   ?
   ????????????????????
```

---

## XML Storage Structure

```
File: AppData/Roaming/SmartStudyPlanner/data/students.xml

<?xml version="1.0"?>
<ArrayOfUser xmlns:xsi="..." xmlns:xsd="...">
  <User>
    <ID>550e8400-e29b-41d4-a716-446655440000</ID>
    <Role>Student</Role>
    <Username>john_doe</Username>
  <Password>MyPassword123</Password>
    <FirstName>John</FirstName>
    <LastName>Doe</LastName>
    <Gender>Male</Gender>
  <Department>Computer Science</Department>
  </User>
  
  <User>
    <ID>6ba7b810-9dad-11d1-80b4-00c04fd430c8</ID>
    <Role>Student</Role>
    <Username>jane_smith</Username>
    <Password>SecurePass456</Password>
    <FirstName>Jane</FirstName>
    <LastName>Smith</LastName>
    <Gender>Female</Gender>
    <Department>Engineering</Department>
  </User>
</ArrayOfUser>
```

---

## Key Decision Points

```
Registration:
??? Are all fields filled?
    ?? NO  ? Show warning, don't proceed
    ?? YES ? Continue
        ??? Does username already exist?
            ?? YES ? Show error, don't register
    ?? NO  ? Continue
          ??? Can we write to XML file?
        ?? NO  ? Show error
      ?? YES ? Success!

Login:
??? Are username & password provided?
    ?? NO  ? Show warning
    ?? YES ? Continue
        ??? Does user exist in XML for this role?
     ?? NO  ? Show error with debug info
       ?? YES ? Success! Set session and open main app
```

---

**All diagrams show the complete working system!** ?
